{"version":3,"sources":["utils/firebase.js","Header.js","utils/stringFormat.js","components/Accounts.js","components/Cates.js","components/Posts.js","components/MonthSelect.js","components/Balances.js","components/QueryBalances.js","components/Login.js","components/Dashboard.js","images/avatar/large/matthew.png","images/avatar/large/kristy.png","components/User.js","App.js","index.js"],"names":["app","firebase","initializeApp","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","db","firestore","auth","Header","history","useHistory","React","useState","activeItem","setActiveItem","user","setUser","handleClick","e","name","useEffect","onAuthStateChanged","currUser","Menu","secondary","pointing","widths","Item","as","Link","to","onClick","active","Dropdown","item","text","position","signOut","then","push","Icon","displayName","numFormat","total","Intl","NumberFormat","currency","format","Accounts","currentUser","open","setOpen","docID","setDocID","setName","balance","setBalance","prior","setPrior","gridRows","setGridRows","setDefalut","col","collection","where","email","onSnapshot","snapshot","console","log","size","rows","docs","map","doc","data","id","grid","i","columns","length","Grid","Column","Segment","textAlign","Label","attached","Row","row","color","Container","className","Modal","closeIcon","onClose","Content","Form","Field","value","onChange","target","placeholder","type","selection","options","key","obj","Actions","Button","floated","delete","createdAt","Timestamp","now","update","add","Cates","orderBy","Posts","title","setTitle","income","setIncome","Date","toISOString","slice","date","setDate","isIncome","setIsIncome","activeBalance","setActiveBalance","posts","setPosts","topAccounts","setTopAccounts","handleItemClick","get","fluid","expense","set","inverted","Statistic","horizontal","Value","verticalAlign","Table","unstackable","Body","Cell","circular","MonthButton","props","onPlusClick","primary","onDoubleClick","onMinusClick","Balances","account","setAccount","oldAmt","setOldAmt","isIncomeOld","setIsIncomeOld","activeAccount","setActiveAccount","loading","setIsLoding","balances","setBalances","cate","setCate","cates","setCates","setAccountsTotalRows","currentPage","setCurrentPage","totalPages","useRef","updateBalance","amt","current","Math","ceil","index","filter","colCates","d","colBalances","Select","label","temp","QueryBalances","getMonth","month","setMonth","isMonth","setIsMonth","celled","HeaderCell","width","Login","password","mobile","tablet","computer","ref","defaultValue","signInWithEmailAndPassword","userCrendential","basic","Dashboard","setTotal","stretched","Placeholder","Image","rectangular","User","updateProfile","centered","Card","src","sea","girl","Meta","Description","extra","App","path","component","container","document","getElementById","ReactDom","render"],"mappings":"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","file":"static/js/main.729b879b.chunk.js","sourcesContent":["import firebase from 'firebase/app'\r\nimport 'firebase/firestore'\r\nimport \"firebase/auth\"\r\nconst firebaseConfig = {\r\n    apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\r\n    authDomain: \"social-cool-f16ba.firebaseapp.com\",\r\n    projectId: \"social-cool-f16ba\",\r\n    storageBucket: \"social-cool-f16ba.appspot.com\",\r\n    messagingSenderId: \"578558980743\",\r\n    appId: \"1:578558980743:web:4668ba80e8df3c24087e22\"\r\n  };\r\n\r\n const app = firebase.initializeApp(firebaseConfig)\r\n  const db = firebase.firestore()\r\n\r\n const auth = app.auth()\r\n\r\n  export default firebase\r\n  export {db,auth}","import React from \"react\";\r\nimport { Menu, Icon, Image, Dropdown } from \"semantic-ui-react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { auth } from \"./utils/firebase\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nfunction Header() {\r\n  // const user = auth.currentUser;\r\n  const history = useHistory();\r\n  const [activeItem, setActiveItem] = React.useState(\"\");\r\n  const [user, setUser] = React.useState(null);\r\n  React.useEffect(() => {\r\n    auth.onAuthStateChanged((currUser) => {\r\n      setUser(currUser);\r\n    });\r\n  }, []);\r\n\r\n  function handleClick(e, { name }) {\r\n    setActiveItem(name);\r\n  }\r\n  return (\r\n    <Menu secondary pointing widths={5}>\r\n      <Menu.Item\r\n        as={Link}\r\n        to=\"/balances\"\r\n        name=\"balances\"\r\n        onClick={handleClick}\r\n        active={activeItem === \"balances\"}\r\n      >\r\n        收支\r\n      </Menu.Item>\r\n\r\n      <Menu.Item\r\n        as={Link}\r\n        to=\"/query-balances\"\r\n        name=\"query-balances\"\r\n        onClick={handleClick}\r\n        active={activeItem === \"query-balances\"}\r\n      >\r\n        明細\r\n      </Menu.Item>\r\n\r\n      <Menu.Item\r\n        as={Link}\r\n        to=\"/dashboard\"\r\n        name=\"dashboard\"\r\n        onClick={handleClick}\r\n        active={activeItem === \"dashboard\"}\r\n      >\r\n        統計\r\n      </Menu.Item>\r\n\r\n      <Dropdown item text=\"設定\">\r\n        <Dropdown.Menu>\r\n          <Dropdown.Item as={Link} to=\"/user\">\r\n            使用者\r\n          </Dropdown.Item>\r\n          <Dropdown.Item as={Link} to=\"/accounts\">\r\n            帳戶\r\n          </Dropdown.Item>\r\n          <Dropdown.Item  as={Link} to=\"/cates\">類別</Dropdown.Item>\r\n        </Dropdown.Menu>\r\n      </Dropdown>\r\n\r\n      <Menu.Menu position=\"right\">\r\n        {user ? (\r\n          <Menu.Item\r\n            name=\"\"\r\n            onClick={() => {\r\n              auth.signOut().then(() => {\r\n                history.push(\"/login\");\r\n              });\r\n            }}\r\n          >\r\n            <Icon name=\"sign-out\" />\r\n            {user.displayName}\r\n          </Menu.Item>\r\n        ) : (\r\n          <Menu.Item name=\"login\" as={Link} to=\"/login\" onClick={handleClick}>\r\n            Login\r\n          </Menu.Item>\r\n        )}\r\n      </Menu.Menu>\r\n    </Menu>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","const numFormat = function numberFormat(total) {\r\n  var formatter = new Intl.NumberFormat(\"en-US\", {\r\n    currency: \"USD\", // 2,500\r\n   /* style: \"currency\"  $2,500.00 */\r\n  });\r\n  return formatter.format(total);\r\n};\r\n\r\nexport { numFormat };\r\n","import React from \"react\";\r\nimport {\r\n  Grid,\r\n  Segment,\r\n  Label,\r\n  Header,\r\n  Button,\r\n  Icon,\r\n  Modal,\r\n  Form,\r\n  Dropdown,\r\n  Container,\r\n} from \"semantic-ui-react\";\r\nimport firebase, { db } from \"../utils/firebase\";\r\nimport { numFormat } from \"../utils/stringFormat\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { auth } from \"../utils/firebase\";\r\n\r\nexport default function Accounts() {\r\n  const user = auth.currentUser;\r\n  // 編輯視窗顯示控制\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  // 資料欄位\r\n  //  { name: \"土地銀行1\", balance: \"908\", prior: \"1\" },\r\n  const [docID, setDocID] = React.useState(\"\");\r\n  const [name, setName] = React.useState(\"\");\r\n  const [balance, setBalance] = React.useState(\"\");\r\n  const [prior, setPrior] = React.useState(\"\");\r\n\r\n  // 區塊顯示\r\n  const [gridRows, setGridRows] = React.useState([]);\r\n\r\n  React.useEffect(() => {\r\n    let col = db.collection(\"accounts\");\r\n    // col.orderBy(\"prior\");\r\n    if (user) col = col.where(\"user\", \"==\", user.email);\r\n    // col=col.where(\"name\",\"==\",\"晚\")\r\n    col = col.onSnapshot((snapshot) => {\r\n      console.log(snapshot.size)\r\n      const rows = snapshot.docs.map((doc) => {\r\n        return { ...doc.data(), id: doc.id };\r\n      });\r\n\r\n      const grid = [];\r\n      let i = 0;\r\n      let columns = [];\r\n      // 沒有資料時,顯示新增鈕\r\n      if (rows.length == 0) {\r\n        columns.push(\r\n          <Grid.Column key=\"0\">\r\n            <Segment\r\n              textAlign=\"center\"\r\n              onClick={() => {\r\n                setOpen(true);\r\n              }}\r\n            >\r\n              <Label attached=\"top\">新增</Label>\r\n\r\n              <Header>+</Header>\r\n            </Segment>\r\n          </Grid.Column>\r\n        );\r\n        grid.push(<Grid.Row key={i}>{columns}</Grid.Row>);\r\n      }\r\n      for (let row of rows) {\r\n        // 資料區塊最前面放置新增鈕\r\n        if (i == 0) {\r\n          columns.push(\r\n            <Grid.Column key=\"0\">\r\n              <Segment\r\n                textAlign=\"center\"\r\n                onClick={() => {\r\n                  setOpen(true);\r\n                }}\r\n              >\r\n                <Label attached=\"top\">新增</Label>\r\n                <Header>+</Header>\r\n              </Segment>\r\n            </Grid.Column>\r\n          );\r\n        }\r\n        // 資料區塊\r\n        columns.push(\r\n          <Grid.Column key={i + 1}>\r\n            <Segment\r\n              textAlign=\"center\"\r\n              onClick={() => {\r\n                setOpen(true);\r\n                setDocID(row.id);\r\n                setName(row.name);\r\n                setPrior(row.prior);\r\n                setBalance(row.balance);\r\n              }}\r\n            >\r\n              <Label color=\"teal\" attached=\"top\">\r\n                {row.name}\r\n              </Label>\r\n              <Header>{numFormat(row.balance)}</Header>\r\n            </Segment>\r\n          </Grid.Column>\r\n        );\r\n        // 每列3筆區塊\r\n        // i = 1,4,7... 或最後一筆時加入一列\r\n        // + 0 1\r\n        // 2 3 4\r\n        // 5 6\r\n        if (i % 3 == 1 || i == rows.length - 1) {\r\n          grid.push(<Grid.Row key={i}>{columns}</Grid.Row>);\r\n          columns = [];\r\n        }\r\n\r\n        i++;\r\n      }\r\n      setGridRows(grid);\r\n    });\r\n  }, []);\r\n\r\n  function saveRow() {\r\n    const row = {\r\n      name: name,\r\n      balance: balance,\r\n      prior,\r\n      user: user.email,\r\n      createdAt: firebase.firestore.Timestamp.now(),\r\n    };\r\n    if (docID) {\r\n      db.collection(\"accounts\").doc(docID).update(row);\r\n    } else {\r\n      db.collection(\"accounts\").add(row);\r\n    }\r\n\r\n    setDefalut();\r\n  }\r\n\r\n  function deleteRow() {\r\n    if (docID) {\r\n      db.collection(\"accounts\")\r\n        .doc(docID)\r\n        .delete()\r\n        .then(() => {\r\n          setDefalut();\r\n        });\r\n    }\r\n  }\r\n\r\n  function setDefalut() {\r\n    setOpen(false);\r\n    setName(\"\");\r\n    setBalance(\"\");\r\n    setPrior(\"\");\r\n  }\r\n\r\n  const friendOptions = [\r\n    {\r\n      key: \"1\",\r\n      text: \"1\",\r\n      value: \"1\",\r\n    },\r\n    {\r\n      key: \"2\",\r\n      text: \"2\",\r\n      value: \"2\",\r\n    },\r\n    {\r\n      key: \"3\",\r\n      text: \"3\",\r\n      value: \"3\",\r\n    },\r\n    {\r\n      key: \"4\",\r\n      text: \"4\",\r\n      value: \"4\",\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <>\r\n      <Container>\r\n        <div className=\"App\">\r\n          <Grid columns={3}>{gridRows}</Grid>\r\n        </div>\r\n\r\n        <Modal\r\n          closeIcon\r\n          open={open}\r\n          onClose={() => {\r\n            setOpen(false);\r\n            setDefalut();\r\n          }}\r\n        >\r\n          <Header>編輯帳戶</Header>\r\n          <Modal.Content>\r\n            <Form size=\"large\">\r\n              <Form.Field>\r\n                <label>帳戶名稱</label>\r\n                <input\r\n                  value={name}\r\n                  onChange={(e) => {\r\n                    setName(e.target.value);\r\n                  }}\r\n                  placeholder=\"please enter your name\"\r\n                />\r\n              </Form.Field>\r\n              <Form.Field>\r\n                <label>餘額</label>\r\n                <input\r\n                  type=\"number\"\r\n                  value={balance}\r\n                  onChange={(e) => {\r\n                    setBalance(e.target.value);\r\n                  }}\r\n                  placeholder=\"please enter your amount\"\r\n                />\r\n              </Form.Field>\r\n              <Form.Field>\r\n                <label>順位</label>\r\n                <Dropdown\r\n                  selection\r\n                  value={prior}\r\n                  placeholder=\"順位\"\r\n                  options={friendOptions}\r\n                  onChange={(e, obj) => {\r\n                    setPrior(obj.value);\r\n                  }}\r\n                ></Dropdown>\r\n              </Form.Field>\r\n            </Form>\r\n          </Modal.Content>\r\n          <Modal.Actions>\r\n            <Button color=\"red\" floated=\"left\" onClick={deleteRow}>\r\n              <Icon name=\"remove\" />\r\n              Delete\r\n            </Button>\r\n            <Button color=\"green\" onClick={saveRow}>\r\n              <Icon name=\"check\" />\r\n              Save\r\n            </Button>\r\n          </Modal.Actions>\r\n        </Modal>\r\n      </Container>\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport {\r\n  Grid,\r\n  Segment,\r\n  Label,\r\n  Header,\r\n  Button,\r\n  Icon,\r\n  Modal,\r\n  Form,\r\n  Dropdown,\r\n  Container,\r\n} from \"semantic-ui-react\";\r\nimport firebase, { db } from \"../utils/firebase\";\r\n\r\nimport { auth } from \"../utils/firebase\";\r\n\r\nexport default function Cates() {\r\n  const user = auth.currentUser;\r\n  // 編輯視窗顯示控制\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  // 資料欄位\r\n  //  { name: \"水電\", prior: \"1\" },\r\n  const [docID, setDocID] = React.useState(\"\");\r\n  const [name, setName] = React.useState(\"\");\r\n  \r\n  const [prior, setPrior] = React.useState(\"\");\r\n\r\n  // 區塊顯示\r\n  const [gridRows, setGridRows] = React.useState([]);\r\n\r\n  React.useEffect(() => {\r\n    let col = db.collection(\"cates\").orderBy(\"prior\");\r\n    // col.orderBy(\"prior\");\r\n    if (user) col = col.where(\"user\", \"==\", user.email);\r\n    // col=col.where(\"name\",\"==\",\"晚\")\r\n    col = col.onSnapshot((snapshot) => {\r\n      console.log(snapshot.size)\r\n      const rows = snapshot.docs.map((doc) => {\r\n        return { ...doc.data(), id: doc.id };\r\n      });\r\n\r\n      const grid = [];\r\n      let i = 0;\r\n      let columns = [];\r\n      // 沒有資料時,顯示新增鈕\r\n      if (rows.length == 0) {\r\n        columns.push(\r\n          <Grid.Column key=\"0\">\r\n            <Segment\r\n              textAlign=\"center\"\r\n              onClick={() => {\r\n                setOpen(true);\r\n              }}\r\n            >\r\n              <Label attached=\"top\">新增</Label>\r\n\r\n              <Header>+</Header>\r\n            </Segment>\r\n          </Grid.Column>\r\n        );\r\n        grid.push(<Grid.Row key={i}>{columns}</Grid.Row>);\r\n      }\r\n      for (let row of rows) {\r\n        // 資料區塊最前面放置新增鈕\r\n        if (i == 0) {\r\n          columns.push(\r\n            <Grid.Column key=\"0\">\r\n              <Segment\r\n                textAlign=\"center\"\r\n                onClick={() => {\r\n                  setOpen(true);\r\n                }}\r\n              >\r\n                <Label attached=\"top\">新增</Label>\r\n                <Header>+</Header>\r\n              </Segment>\r\n            </Grid.Column>\r\n          );\r\n        }\r\n        // 資料區塊\r\n        columns.push(\r\n          <Grid.Column key={i + 1}>\r\n            <Segment\r\n              textAlign=\"center\"\r\n              onClick={() => {\r\n                setOpen(true);\r\n                setDocID(row.id);\r\n                setName(row.name);\r\n                setPrior(row.prior);\r\n                \r\n              }}\r\n            >\r\n             \r\n             <Label attached=\"top\" color=\"teal\">{row.prior}</Label>\r\n           <Header>{row.name}</Header>\r\n             \r\n            </Segment>\r\n          </Grid.Column>\r\n        );\r\n        // 每列3筆區塊\r\n        // i = 1,4,7... 或最後一筆時加入一列\r\n        // + 0 1\r\n        // 2 3 4\r\n        // 5 6\r\n        if (i % 3 == 1 || i == rows.length - 1) {\r\n          grid.push(<Grid.Row key={i}>{columns}</Grid.Row>);\r\n          columns = [];\r\n        }\r\n\r\n        i++;\r\n      }\r\n      setGridRows(grid);\r\n    });\r\n  }, []);\r\n\r\n  function saveRow() {\r\n    const row = {\r\n      name: name,      \r\n      prior,\r\n      user: user.email,\r\n      createdAt: firebase.firestore.Timestamp.now(),\r\n    };\r\n    if (docID) {\r\n      db.collection(\"cates\").doc(docID).update(row);\r\n    } else {\r\n      db.collection(\"cates\").add(row);\r\n    }\r\n\r\n    setDefalut();\r\n  }\r\n\r\n  function deleteRow() {\r\n    if (docID) {\r\n      db.collection(\"cates\")\r\n        .doc(docID)\r\n        .delete()\r\n        .then(() => {\r\n          setDefalut();\r\n        });\r\n    }\r\n  }\r\n\r\n  function setDefalut() {\r\n    setOpen(false);\r\n    setName(\"\");\r\n    \r\n    setPrior(\"\");\r\n  }\r\n\r\n  const friendOptions = [\r\n    {\r\n      key: \"1\",\r\n      text: \"1\",\r\n      value: \"1\",\r\n    },\r\n    {\r\n      key: \"2\",\r\n      text: \"2\",\r\n      value: \"2\",\r\n    },\r\n    {\r\n      key: \"3\",\r\n      text: \"3\",\r\n      value: \"3\",\r\n    },\r\n    {\r\n      key: \"4\",\r\n      text: \"4\",\r\n      value: \"4\",\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <>\r\n      <Container>\r\n        <div className=\"App\">\r\n          <Grid columns={3}>{gridRows}</Grid>\r\n        </div>\r\n\r\n        <Modal\r\n          closeIcon\r\n          open={open}\r\n          onClose={() => {\r\n            setOpen(false);\r\n            setDefalut();\r\n          }}\r\n        >\r\n          <Header>編輯</Header>\r\n          <Modal.Content>\r\n            <Form size=\"large\">\r\n              <Form.Field>\r\n                <label>名稱</label>\r\n                <input\r\n                  value={name}\r\n                  onChange={(e) => {\r\n                    setName(e.target.value);\r\n                  }}\r\n                  placeholder=\"\"\r\n                />\r\n              </Form.Field>\r\n              \r\n              <Form.Field>\r\n                <label>順位</label>\r\n                <Dropdown\r\n                  selection\r\n                  value={prior}\r\n                  placeholder=\"順位\"\r\n                  options={friendOptions}\r\n                  onChange={(e, obj) => {\r\n                    setPrior(obj.value);\r\n                  }}\r\n                ></Dropdown>\r\n              </Form.Field>\r\n            </Form>\r\n          </Modal.Content>\r\n          <Modal.Actions>\r\n            <Button color=\"red\" floated=\"left\" onClick={deleteRow}>\r\n              <Icon name=\"remove\" />\r\n              Delete\r\n            </Button>\r\n            <Button color=\"green\" onClick={saveRow}>\r\n              <Icon name=\"check\" />\r\n              Save\r\n            </Button>\r\n          </Modal.Actions>\r\n        </Modal>\r\n      </Container>\r\n    </>\r\n  );\r\n}\r\n","import { db } from \"../utils/firebase\";\r\nimport React from \"react\";\r\nimport { numFormat } from \"../utils/stringFormat\";\r\n\r\nimport {\r\n  Grid,\r\n  Label,\r\n  Icon,\r\n  Container,\r\n  Segment,\r\n  Menu,\r\n  Card,\r\n  List,\r\n  Button,\r\n  Table,\r\n  Header,\r\n  Statistic,\r\n  Modal,\r\n  Form,\r\n} from \"semantic-ui-react\";\r\nfunction Posts() {\r\n  const rows = [\r\n    { name: \"現金\", amt: \"678\", date: \"2022-09-01\" },\r\n    { name: \"信用卡\", amt: \"4,567\", date: \"2022-01-08\" },\r\n    { name: \"玉山\", amt: \"908\", date: \"2022-10-22\" },\r\n    { name: \"中國信託\", amt: \"908\", date: \"2022-10-22\" },\r\n  ];\r\n  // 編輯視窗顯示控制\r\n  const [open, setOpen] = React.useState(false);\r\n  // 資料欄位\r\n  const [docID, setDocID] = React.useState(\"\");\r\n  const [title, setTitle] = React.useState(\"\");\r\n  const [income, setIncome] = React.useState(\"\");\r\n  const [date, setDate] = React.useState(new Date().toISOString().slice(0, 10));\r\n\r\n  const [isIncome, setIsIncome] = React.useState(\"income\");\r\n\r\n  const [activeItem, setActiveItem] = React.useState(\"\");\r\n  const [activeBalance, setActiveBalance] = React.useState(0);\r\n  const [posts, setPosts] = React.useState([]);\r\n  const [topAccounts, setTopAccounts] = React.useState([]);\r\n  React.useEffect(() => {\r\n    db.collection(\"topics\")\r\n      .where(\"prior\", \"<=\", \"3\")\r\n      .get()\r\n      .then((snapshot) => {\r\n        const data = snapshot.docs.map((doc) => {\r\n          return doc.data();\r\n        });\r\n        setTopAccounts(data);\r\n        console.log(data);\r\n      });\r\n\r\n    db.collection(\"posts\").onSnapshot((snapshot) => {\r\n      const data = snapshot.docs.map((doc) => {\r\n        return { ...doc.data(), id: doc.id };\r\n      });\r\n      setPosts(data);\r\n    });\r\n  }, []);\r\n\r\n  function saveRow() {\r\n    let row = {\r\n      title,\r\n      date\r\n    };\r\n    if(isIncome=='income'){\r\n      row.income = income;\r\n    }else{\r\n      row.expense = income;\r\n    }\r\n    \r\n    if (docID) {\r\n      db.collection(\"posts\")\r\n        .doc(docID)\r\n        .set(row)\r\n        .then(() => {\r\n          setDefalut();\r\n        });\r\n    } else {\r\n      db.collection(\"posts\")\r\n        .add(row)\r\n        .then(() => {\r\n          setDefalut();\r\n        });\r\n    }\r\n  }\r\n\r\n  function deleteRow() {\r\n    if (docID) {\r\n      db.collection(\"posts\")\r\n        .doc(docID)\r\n        .delete()\r\n        .then(() => {\r\n          console.log(\"add\");\r\n          setDefalut();\r\n        });\r\n    }\r\n  }\r\n\r\n  function setDefalut() {\r\n    setOpen(false);\r\n    setDocID(\"\");\r\n    setTitle(\"\");\r\n    setIncome(\"\");\r\n  }\r\n\r\n  function handleItemClick(e, { name }) {\r\n      setIsIncome(name)\r\n  }\r\n  return (\r\n    <>\r\n      <Header></Header>\r\n      <Container>\r\n        <Modal\r\n          closeIcon\r\n          open={open}\r\n          onClose={() => {\r\n            setOpen(false);\r\n            setDefalut();\r\n          }}\r\n        >\r\n          <Header>編輯收支</Header>\r\n          <Modal.Content>\r\n            <Menu fluid widths={2} pointing secondary  >\r\n              <Menu.Item \r\n              color='teal'\r\n              \r\n                name=\"income\"\r\n                active={isIncome === \"income\"}\r\n                onClick={handleItemClick}\r\n              >收入</Menu.Item>\r\n              <Menu.Item\r\n              color='orange'\r\n                name=\"expense\"\r\n                active={isIncome === \"expense\"}\r\n                onClick={handleItemClick}\r\n              >支出</Menu.Item>\r\n              \r\n            </Menu>\r\n            <Form size=\"large\">\r\n            <Form.Field>\r\n                <label>日期</label>\r\n                <input\r\n                type=\"date\"\r\n                  value={date}\r\n                  onChange={(e) => {\r\n                    setDate(e.target.value);\r\n                  }}\r\n                />\r\n              </Form.Field>\r\n              <Form.Field>\r\n                <label>項目</label>\r\n                <input\r\n                  value={title}\r\n                  onChange={(e) => {\r\n                    setTitle(e.target.value);\r\n                  }}\r\n                />\r\n              </Form.Field>\r\n              <Form.Field>\r\n                <label>金額</label>\r\n                <input\r\n                  type=\"number\"\r\n                  value={income}\r\n                  onChange={(e) => {\r\n                    setIncome(e.target.value);\r\n                  }}\r\n                />\r\n              </Form.Field>\r\n            </Form>\r\n          </Modal.Content>\r\n          <Modal.Actions>\r\n            {docID && <Button color=\"red\" floated=\"left\" onClick={deleteRow}>\r\n              <Icon name=\"remove\" />\r\n              Delete\r\n            </Button>}\r\n            \r\n            <Button color=\"green\" onClick={saveRow}>\r\n              <Icon name=\"check\" />\r\n              Save\r\n            </Button>\r\n          </Modal.Actions>\r\n        </Modal>\r\n        {/* 帳戶 */}\r\n        <Grid columns=\"equal\">\r\n          <Grid.Row>\r\n            {topAccounts.map((row, i) => {\r\n              return (\r\n                <Grid.Column key={i}>\r\n                  <Segment\r\n                    textAlign=\"center\"\r\n                    onClick={() => {\r\n                      setActiveItem(row.name);\r\n                      setActiveBalance(row.balance);\r\n                    }}\r\n                    color=\"teal\"\r\n                    inverted={activeItem === row.name}\r\n                  >\r\n                    {row.name}\r\n                  </Segment>\r\n                </Grid.Column>\r\n              );\r\n            })}\r\n          </Grid.Row>\r\n          {activeItem && (\r\n            <Grid.Row>\r\n              <Grid.Column>\r\n                <Statistic horizontal>\r\n                  <Statistic.Value>{numFormat(activeBalance)}</Statistic.Value>\r\n                  {/* <Statistic.Label>玉山</Statistic.Label> */}\r\n                </Statistic>\r\n              </Grid.Column>\r\n\r\n              <Grid.Column verticalAlign=\"middle\">\r\n                <Button\r\n                  floated=\"right\"\r\n                  color=\"blue\"\r\n                  onClick={() => {\r\n                    setOpen(true);\r\n                    // setIsIncome('income')\r\n                  }}\r\n                >\r\n                  <Icon name=\"plus\" /> Create\r\n                </Button>\r\n              </Grid.Column>\r\n            </Grid.Row>\r\n          )}\r\n          {/*資料表格*/}\r\n          <Grid.Row>\r\n            <Grid.Column>\r\n              {posts.map((row, i) => {\r\n                return (\r\n                  <Table key={i} unstackable>\r\n                    <Table.Body>\r\n                      <Table.Row\r\n                        onClick={() => {\r\n                          setOpen(true);\r\n                          setDocID(row.id);\r\n                          setTitle(row.title);\r\n                          setDate(row.date)\r\n                          if(row.income){\r\n                            setIsIncome('income')\r\n                            setIncome(row.income);\r\n                          }else{\r\n                            setIsIncome('expense')\r\n                            setIncome(row.expense);\r\n\r\n                          }\r\n                          \r\n                        }}\r\n                      >\r\n                        <Table.Cell>\r\n                          <Header as=\"h4\">{row.title}</Header>\r\n                          {row.date}\r\n                        </Table.Cell>\r\n                        <Table.Cell textAlign=\"right\">\r\n                          {row.income ? (\r\n                            <Label color=\"teal\" circular>\r\n                              存\r\n                            </Label>\r\n                          ) : (\r\n                            <Label color=\"orange\" circular>\r\n                              提\r\n                            </Label>\r\n                          )}\r\n                          <br></br>${\" \"}\r\n                          {row.income ? row.income : row.expense + \"\"}\r\n                        </Table.Cell>\r\n                      </Table.Row>\r\n                    </Table.Body>\r\n                  </Table>\r\n                );\r\n              })}\r\n            </Grid.Column>\r\n          </Grid.Row>\r\n        </Grid>\r\n      </Container>\r\n    </>\r\n  );\r\n}\r\nexport default Posts;\r\n","import {\r\n  Container,\r\n  Grid,\r\n  Segment,\r\n  Statistic,\r\n  Dropdown,\r\n  Menu,\r\n  Button,\r\n} from \"semantic-ui-react\";\r\nimport React from \"react\";\r\nfunction MonthSelect(props) {\r\n  const [month, setMonth] = React.useState();\r\n  const months = [];\r\n\r\n  for (let i = 1; i <= 12; i++) {\r\n    let num = i;\r\n    if (i <= 9) num = \"0\" + i;\r\n    months.push({\r\n      key: num,\r\n      text: num,\r\n      value: num,\r\n    });\r\n  }\r\n  return (\r\n    <Dropdown\r\n      selection\r\n      value={month}\r\n      placeholder=\"順位\"\r\n      options={months}\r\n      onChange={props.onChange}\r\n    ></Dropdown>\r\n  );\r\n}\r\n\r\nfunction MonthButton(props) {\r\n  return (\r\n    <Menu widths={3}>\r\n        <Menu.Item>\r\n        <Button onClick={props.onPlusClick}>+</Button>\r\n      </Menu.Item>\r\n      <Menu.Item>\r\n        <Button  primary onDoubleClick={props.onDoubleClick} onClick={props.onClick}>{props.text}</Button>\r\n      </Menu.Item>\r\n      <Menu.Item>\r\n        <Button onClick={props.onMinusClick}>-</Button>\r\n      </Menu.Item>\r\n     \r\n    \r\n    </Menu>\r\n  );\r\n}\r\n\r\nexport default MonthSelect;\r\nexport { MonthButton };\r\n","import { db } from \"../utils/firebase\";\r\nimport React from \"react\";\r\nimport { numFormat } from \"../utils/stringFormat\";\r\n\r\nimport {\r\n  Grid,\r\n  Label,\r\n  Icon,\r\n  Container,\r\n  Segment,\r\n  Menu,\r\n  Card,\r\n  List,\r\n  Button,\r\n  Table,\r\n  Header,\r\n  Statistic,\r\n  Modal,\r\n  Form,\r\n  Dropdown,\r\n  Divider,\r\n} from \"semantic-ui-react\";\r\nimport { auth } from \"../utils/firebase\";\r\nimport MonthSelect from \"./MonthSelect\";\r\n\r\nfunction Balances() {\r\n  const user = auth.currentUser;\r\n  // 編輯視窗顯示控制\r\n  const [open, setOpen] = React.useState(false);\r\n  // 資料欄位\r\n  const [docID, setDocID] = React.useState(\"\");\r\n  const [title, setTitle] = React.useState(\"\");\r\n  const [income, setIncome] = React.useState(\"\");\r\n  const [account, setAccount] = React.useState();\r\n  const [date, setDate] = React.useState(new Date().toISOString().slice(0, 10));\r\n  const [oldAmt, setOldAmt] = React.useState(\"\");\r\n\r\n  // 收支判斷\r\n  const [isIncome, setIsIncome] = React.useState(\"expense\");\r\n  // 記錄原來是否為收入,做為計算餘額用\r\n  const [isIncomeOld, setIsIncomeOld] = React.useState(\"\");\r\n  // 選取帳戶\r\n  const [activeAccount, setActiveAccount] = React.useState() || null;\r\n\r\n  const [loading, setIsLoding] = React.useState(false);\r\n\r\n  const [activeItem, setActiveItem] = React.useState(\"\");\r\n  const [activeBalance, setActiveBalance] = React.useState(0);\r\n  const [balances, setBalances] = React.useState([]);\r\n  const [topAccounts, setTopAccounts] = React.useState([]);\r\n\r\n  const [cate, setCate] = React.useState();\r\n  const [cates, setCates] = React.useState([]);\r\n  // 全部帳戶的筆數\r\n  const [accountsTotalRows, setAccountsTotalRows] = React.useState(0);\r\n\r\n  // 目前頁數\r\n  let [currentPage, setCurrentPage] = React.useState(0);\r\n\r\n  // 每頁筆數\r\n  const rowsPerPage = 3;\r\n\r\n  // 記錄總頁數\r\n  const totalPages = React.useRef();\r\n\r\n  // 記錄最後一筆帳戶\r\n  const lastAccountRef = React.useRef();\r\n\r\n  // 記錄第一筆帳戶\r\n  const firstAccountRef = React.useRef();\r\n\r\n  // 記錄前3筆帳戶\r\n  const top3Accounts = React.useRef();\r\n\r\n  React.useEffect(() => {\r\n    // 帳戶資料\r\n    let col = db.collection(\"accounts\");\r\n    if (user) col = col.where(\"user\", \"==\", user.email);\r\n    // 帳戶筆數\r\n    col.get().then((snapshot) => {\r\n      totalPages.current = Math.ceil(snapshot.size / rowsPerPage);\r\n      setAccountsTotalRows(snapshot.size);\r\n      const data = snapshot.docs.map((doc, index) => {\r\n        return { ...doc.data(), id: doc.id, index };\r\n      });\r\n      topAccounts.current = data;\r\n      // setTopAccounts(data.filter(row=>row.index>=0 && row.index<=2));\r\n      setTopAccounts(\r\n        data.filter(\r\n          (row) =>\r\n            row.index >= currentPage * rowsPerPage &&\r\n            row.index < (currentPage + 1) * rowsPerPage\r\n        )\r\n      );\r\n      // console.log(snapshot.size);\r\n    });\r\n  }, [currentPage]);\r\n\r\n  React.useEffect(() => {\r\n    // 類別資料\r\n    let colCates = db.collection(\"cates\").orderBy(\"prior\");\r\n    if (user) colCates = colCates.where(\"user\", \"==\", user.email);\r\n\r\n    colCates = colCates.onSnapshot((snapshot) => {\r\n      const rows = snapshot.docs.map((doc) => {\r\n        const d = doc.data();\r\n        return { text: d.name, value: d.name, key: doc.id };\r\n      });\r\n      setCates(rows);\r\n    });\r\n\r\n    // 收支資料\r\n    let colBalances = db.collection(\"balances\");\r\n    if (user) colBalances = colBalances.where(\"user\", \"==\", user.email);\r\n    if (activeAccount) {\r\n      colBalances = colBalances.where(\"account.id\", \"==\", activeAccount.id);\r\n    }\r\n    colBalances.orderBy(\"date\", \"desc\").onSnapshot((snapshot) => {\r\n      const data = snapshot.docs.map((doc) => {\r\n        return { ...doc.data(), id: doc.id };\r\n      });\r\n      setBalances(data);\r\n    });\r\n  }, [activeAccount]);\r\n\r\n  function saveRow() {\r\n    setIsLoding(true);\r\n    let row = {\r\n      title,\r\n      date,\r\n      cate,\r\n    };\r\n    if (isIncome == \"income\") {\r\n      row.income = income;\r\n    } else {\r\n      row.expense = income;\r\n    }\r\n    if (account) {\r\n      row.account = account;\r\n    }\r\n\r\n    if (activeAccount) {\r\n      row.account = activeAccount;\r\n    }\r\n\r\n    if (user) {\r\n      row.user = user.email;\r\n    }\r\n\r\n    if (docID) {\r\n      db.collection(\"balances\")\r\n        .doc(docID)\r\n        .set(row)\r\n        .then(() => {\r\n          let temp = 0;\r\n\r\n          // 原本為收入改支出\r\n          if (isIncomeOld == \"income\" && isIncome == \"expense\")\r\n            temp = temp - income * 1 - oldAmt * 1;\r\n          // 支出=>收入\r\n          else if (isIncomeOld == \"expense\" && isIncome == \"income\")\r\n            temp = temp + income * 1 + oldAmt * 1;\r\n          else if (isIncome == \"income\") temp = income - oldAmt;\r\n          else if (isIncome == \"expense\") temp = oldAmt - income;\r\n          updateBalance(temp);\r\n\r\n          // else updateBalance(income * -1);\r\n        });\r\n    } else {\r\n      db.collection(\"balances\")\r\n        .add(row)\r\n        .then(() => {\r\n          if (isIncome == \"income\") updateBalance(income);\r\n          else updateBalance(income * -1);\r\n          setDefalut();\r\n        });\r\n    }\r\n  }\r\n\r\n  // 更新帳戶餘額\r\n  function updateBalance(amt) {\r\n    // const temp = activeBalance *1\r\n    db.collection(\"accounts\")\r\n      .doc(activeAccount.id)\r\n      .update({\r\n        balance: activeBalance * 1 + amt * 1,\r\n      })\r\n      .then(() => {\r\n        setDefalut();\r\n        setIsLoding(false);\r\n        // setActiveAccount(account)\r\n        // setActiveBalance(900)\r\n        // console.log(\"ok\");\r\n      });\r\n  }\r\n\r\n  function deleteRow() {\r\n    if (docID) {\r\n      db.collection(\"balances\")\r\n        .doc(docID)\r\n        .delete()\r\n        .then(() => {\r\n          if (isIncome == \"expense\") updateBalance(income);\r\n          else updateBalance(income * -1);\r\n          setDefalut();\r\n        });\r\n    }\r\n  }\r\n\r\n  function setDefalut() {\r\n    setOpen(false);\r\n    setDocID(\"\");\r\n    setTitle(\"\");\r\n    setIncome(\"\");\r\n  }\r\n\r\n  function handleItemClick(e, { name }) {\r\n    setIsIncome(name);\r\n  }\r\n  return (\r\n    <>\r\n      {/* <Header>{isIncomeOld}</Header> */}\r\n      <Container>\r\n        <Modal\r\n          closeIcon\r\n          open={open}\r\n          onClose={() => {\r\n            setOpen(false);\r\n            setDefalut();\r\n          }}\r\n        >\r\n          <Header>編輯收支</Header>\r\n          <Modal.Content>\r\n            <Menu fluid widths={2} pointing secondary>\r\n              <Menu.Item\r\n                color=\"teal\"\r\n                name=\"income\"\r\n                active={isIncome === \"income\"}\r\n                onClick={handleItemClick}\r\n              >\r\n                收入\r\n              </Menu.Item>\r\n              <Menu.Item\r\n                color=\"orange\"\r\n                name=\"expense\"\r\n                active={isIncome === \"expense\"}\r\n                onClick={handleItemClick}\r\n              >\r\n                支出\r\n              </Menu.Item>\r\n            </Menu>\r\n            <Form size=\"large\">\r\n              <Form.Field>\r\n                <label>日期</label>\r\n                <input\r\n                  type=\"date\"\r\n                  value={date}\r\n                  onChange={(e) => {\r\n                    setDate(e.target.value);\r\n                  }}\r\n                />\r\n              </Form.Field>\r\n\r\n              {/* <Form.Input width={8} label=\"Last name\" placeholder=\"Last name\" /> */}\r\n              <Form.Select\r\n                selection\r\n                fluid\r\n                label=\"類別\"\r\n                placeholder=\"\"\r\n                value={cate}\r\n                options={cates}\r\n                onChange={(e, obj) => {\r\n                  setCate(obj.value);\r\n                  console.log(obj.value);\r\n                }}\r\n              />\r\n\r\n              <Form.Field>\r\n                <label>項目</label>\r\n                <input\r\n                  value={title}\r\n                  onChange={(e) => {\r\n                    setTitle(e.target.value);\r\n                  }}\r\n                />\r\n              </Form.Field>\r\n              <Form.Field>\r\n                <label>金額</label>\r\n                <input\r\n                  type=\"number\"\r\n                  value={income}\r\n                  onChange={(e) => {\r\n                    setIncome(e.target.value);\r\n                  }}\r\n                />\r\n              </Form.Field>\r\n            </Form>\r\n          </Modal.Content>\r\n          <Modal.Actions>\r\n            {docID && (\r\n              <Button color=\"red\" floated=\"left\" onClick={deleteRow}>\r\n                <Icon name=\"remove\" />\r\n                Delete\r\n              </Button>\r\n            )}\r\n\r\n            <Button color=\"green\" loading={loading} onClick={saveRow}>\r\n              <Icon name=\"check\" />\r\n              Save\r\n            </Button>\r\n          </Modal.Actions>\r\n        </Modal>\r\n        {/* 帳戶 */}\r\n        <Grid columns={3}>\r\n          {topAccounts.map((row, i) => (\r\n            <Grid.Column key={row.id}>\r\n              <Segment\r\n                textAlign=\"center\"\r\n                onClick={() => {\r\n                  setActiveItem(row.name);\r\n                  setActiveBalance(row.balance);\r\n                  setActiveAccount(row);\r\n                }}\r\n                color=\"teal\"\r\n                inverted={activeAccount?.name === row.name}\r\n              >\r\n                {row.name}\r\n              </Segment>\r\n            </Grid.Column>\r\n          ))}\r\n        </Grid>\r\n        {activeAccount && (\r\n          <Grid columns={2}>\r\n            <Grid.Row>\r\n              <Grid.Column\r\n                onClick={() => {\r\n                  setCurrentPage(currentPage + 1);\r\n                  // 最後一頁\r\n                  if (currentPage == totalPages.current-1) {\r\n                    setCurrentPage(0);\r\n                  }\r\n                  // console.log(currentPage)\r\n                  // console.log(totalPages)\r\n\r\n                  // setCurrentPage(1)\r\n                }}\r\n              >\r\n                <Statistic horizontal>\r\n                  <Statistic.Value>{numFormat(activeBalance)}</Statistic.Value>\r\n                  {/* <Statistic.Label>{totalPages.current}</Statistic.Label> */}\r\n                </Statistic>\r\n              </Grid.Column>\r\n\r\n              <Grid.Column verticalAlign=\"middle\">\r\n                <Button\r\n                  floated=\"right\"\r\n                  color=\"blue\"\r\n                  onClick={() => {\r\n                    setOpen(true);\r\n                  }}\r\n                >\r\n                  <Icon name=\"plus\" /> Create\r\n                </Button>\r\n              </Grid.Column>\r\n            </Grid.Row>\r\n          </Grid>\r\n        )}\r\n\r\n        {/*資料表格*/}\r\n        <Grid>\r\n          <Grid.Row>\r\n            <Grid.Column>\r\n              {balances.map((row, i) => {\r\n                return (\r\n                  <Table key={row.id} unstackable>\r\n                    <Table.Body>\r\n                      <Table.Row\r\n                        onClick={() => {\r\n                          setOpen(true);\r\n                          setDocID(row.id);\r\n                          setTitle(row.title);\r\n                          setDate(row.date);\r\n                          setAccount(row.account);\r\n                          setCate(row.cate);\r\n                          setActiveAccount(row.account);\r\n\r\n                          if (row.income) {\r\n                            setIsIncome(\"income\");\r\n                            setIncome(row.income);\r\n                            // 記錄原金額\r\n                            setOldAmt(row.income);\r\n                            setIsIncomeOld(\"income\");\r\n                          } else {\r\n                            setIsIncome(\"expense\");\r\n                            setIncome(row.expense);\r\n                            // 記錄原金額\r\n                            setOldAmt(row.expense);\r\n                            setIsIncomeOld(\"expense\");\r\n                          }\r\n                        }}\r\n                      >\r\n                        <Table.Cell>\r\n                          <Header as=\"h4\">{row.title}</Header>\r\n                          <span>{row.date} </span>\r\n                          {!activeAccount && (\r\n                            <Label color=\"teal\">{row.account.name}</Label>\r\n                          )}\r\n                          {row.cate && <Label>{row.cate}</Label>}\r\n                        </Table.Cell>\r\n                        <Table.Cell textAlign=\"right\">\r\n                          {row.income ? (\r\n                            <Label color=\"teal\" circular>\r\n                              存\r\n                            </Label>\r\n                          ) : (\r\n                            <Label color=\"orange\" circular>\r\n                              提\r\n                            </Label>\r\n                          )}\r\n                          <br></br>${\" \"}\r\n                          {row.income\r\n                            ? numFormat(row.income)\r\n                            : numFormat(row.expense) + \"\"}\r\n                        </Table.Cell>\r\n                      </Table.Row>\r\n                    </Table.Body>\r\n                  </Table>\r\n                );\r\n              })}\r\n            </Grid.Column>\r\n          </Grid.Row>\r\n        </Grid>\r\n      </Container>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Balances;\r\n","import {\r\n  Container,\r\n  Button,\r\n  Grid,\r\n  Menu,\r\n  Table,\r\n  Label,\r\n  Icon,\r\n} from \"semantic-ui-react\";\r\nimport { MonthButton } from \"./MonthSelect\";\r\nimport React from \"react\";\r\nimport { db, auth } from \"../utils/firebase\";\r\n\r\nimport { numFormat } from \"../utils/stringFormat\";\r\n\r\nexport default function QueryBalances() {\r\n  const user = auth.currentUser;\r\n  const [month, setMonth] = React.useState(new Date().getMonth() + 1);\r\n  // 中間按鈕按下切換全年或當月\r\n  const [isMonth, setIsMonth] = React.useState(false);\r\n\r\n  const [balances, setBalances] = React.useState([]);\r\n  const [cate, setCate] = React.useState();\r\n  const [cates, setCates] = React.useState([]);\r\n  React.useEffect(() => {\r\n    // 類別資料\r\n    let colCates = db.collection(\"cates\").orderBy(\"prior\");\r\n    if (user) colCates = colCates.where(\"user\", \"==\", user.email);\r\n\r\n    colCates = colCates.onSnapshot((snapshot) => {\r\n      const rows = snapshot.docs.map((doc) => {\r\n        return { ...doc.data(), id: doc.id };\r\n      });\r\n      setCates(rows);\r\n    });\r\n    // 收支資料\r\n    let colBalances = db.collection(\"balances\");\r\n    if (user) colBalances = colBalances.where(\"user\", \"==\", user.email);\r\n    if (month !== 0)\r\n      colBalances = colBalances\r\n        .where(\"date\", \">=\", `2022-0${month}-01`)\r\n        .where(\"date\", \"<=\", `2022-0${month}-31`);\r\n    if (cate) colBalances = colBalances.where(\"cate\", \"==\", cate);\r\n\r\n    colBalances.orderBy(\"date\", \"desc\").onSnapshot((snapshot) => {\r\n      const data = snapshot.docs.map((doc) => {\r\n        return { ...doc.data(), id: doc.id };\r\n      });\r\n      setBalances(data);\r\n      // console.log(data);\r\n    });\r\n  }, [month, cate]);\r\n\r\n  function handleItemClick(e, { name }) {\r\n    setCate(name);\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      <MonthButton\r\n        text={month !== 0 ? `${month} 月` : \"全年\"}\r\n        onPlusClick={() => {\r\n          if (month == 12) setMonth(0);\r\n          else setMonth(month + 1);\r\n        }}\r\n        // 中間按鈕按下切換全年或當月\r\n        onClick={() => {\r\n          if (isMonth) {\r\n            setMonth(new Date().getMonth() + 1);\r\n            setIsMonth(false);\r\n          } else {\r\n            setMonth(0);\r\n            setIsMonth(true);\r\n          }\r\n        }}\r\n        onDoubleClick={() => {\r\n          setMonth(0);\r\n        }}\r\n        onMinusClick={() => {\r\n          if (month == 0) setMonth(12);\r\n          else setMonth(month - 1);\r\n        }}\r\n      ></MonthButton>\r\n      <Menu color=\"blue\" pointing secondary>\r\n        {cates.map((obj, i) => (\r\n          <Menu.Item\r\n            key={i}\r\n            name={obj.name}\r\n            active={cate === obj.name}\r\n            onClick={handleItemClick}\r\n          >\r\n            {obj.name}\r\n          </Menu.Item>\r\n        ))}\r\n        <Menu.Item\r\n          name=\"all\"\r\n          active={!cate}\r\n          onClick={() => {\r\n            setCate();\r\n          }}\r\n        >\r\n          全部\r\n        </Menu.Item>\r\n      </Menu>\r\n      {/* <Label\r\n        as=\"a\"\r\n        color={cate=='加油' ?'teal':'grey' }\r\n      \r\n        onClick={(e, obj) => {\r\n          console.log(obj.children);\r\n          if (!cate) setCate(obj.children);\r\n          else setCate();\r\n        }}\r\n      >\r\n        加油\r\n      </Label> */}\r\n\r\n      <Table celled unstackable>\r\n        <Table.Header>\r\n          <Table.Row>\r\n            <Table.HeaderCell width={3}>日期</Table.HeaderCell>\r\n            <Table.HeaderCell>項目</Table.HeaderCell>\r\n            <Table.HeaderCell width={3} textAlign=\"right\">收支</Table.HeaderCell>\r\n            {/* <Table.HeaderCell>支出</Table.HeaderCell> */}\r\n          </Table.Row>\r\n        </Table.Header>\r\n\r\n        <Table.Body>\r\n          {balances.map((row, i) => (\r\n            <Table.Row key={i}>\r\n              <Table.Cell>{row.date.slice(5, 10)}</Table.Cell>\r\n              <Table.Cell>\r\n                <Label>{row.cate}</Label>\r\n                {`  ${row.title}`}\r\n              </Table.Cell>\r\n              <Table.Cell textAlign=\"right\"> {row.income ?<Label color=\"teal\">{numFormat(row.income)}</Label> :\r\n             numFormat(row.expense)  }</Table.Cell>\r\n            </Table.Row>\r\n          ))}\r\n        </Table.Body>\r\n      </Table>\r\n    </Container>\r\n  );\r\n}\r\n","import {\r\n  Form,\r\n  Modal,\r\n  Container,\r\n  Button,\r\n  Grid,\r\n  Segment,\r\n} from \"semantic-ui-react\";\r\nimport React from \"react\";\r\nimport { auth } from \"../utils/firebase\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nexport default function Login() {\r\n    const history = useHistory()\r\n  const email = React.useRef();\r\n  const password = React.useRef();\r\n  return (\r\n    <Container>\r\n      <Grid columns={3}>\r\n        <Grid.Row>\r\n          <Grid.Column mobile={16} tablet={3} computer={5}></Grid.Column>\r\n          <Grid.Column mobile={16} tablet={10} computer={6}>\r\n            <Segment>\r\n              <Form size=\"large\">\r\n                <Form.Field>\r\n                  <label>Email</label>\r\n                  <input ref={email} defaultValue=\"mkdodos@gmail.com\"></input>\r\n                </Form.Field>\r\n                <Form.Field>\r\n                  <label>Password</label>\r\n                  <input ref={password} defaultValue=\"123456\"></input>\r\n                </Form.Field>\r\n                <Button\r\n                  onClick={() => {\r\n                    auth\r\n                      .signInWithEmailAndPassword(\r\n                        email.current.value,\r\n                        password.current.value\r\n                      )\r\n                      .then((userCrendential) => {\r\n                        history.push('/user')\r\n                        console.log(userCrendential.user.email);\r\n                      });\r\n                    // console.log(password.current.value);\r\n                  }}\r\n                  size=\"large\"\r\n                  color=\"blue\"\r\n                >\r\n                  Mark\r\n                </Button>\r\n                <Button\r\n                  basic\r\n                  floated=\"right\"\r\n                  onClick={() => {\r\n                    auth\r\n                      .signInWithEmailAndPassword(\"dada@gmail.com\", \"123456\")\r\n                      .then((userCrendential) => {\r\n                        console.log(userCrendential.user.email);\r\n                        history.push('/user')\r\n                      });\r\n                  }}\r\n                  size=\"large\"\r\n                  color=\"blue\"\r\n                >\r\n                  Dada\r\n                </Button>\r\n              </Form>\r\n            </Segment>\r\n          </Grid.Column>\r\n          <Grid.Column mobile={16} tablet={3} computer={5}></Grid.Column>\r\n        </Grid.Row>\r\n      </Grid>\r\n    </Container>\r\n  );\r\n}\r\n","import {\r\n  Container,\r\n  Grid,\r\n  Segment,\r\n  Statistic,\r\n  Dropdown,\r\n  Placeholder,\r\n} from \"semantic-ui-react\";\r\nimport { db, auth } from \"../utils/firebase\";\r\nimport React from \"react\";\r\nimport { numFormat } from \"../utils/stringFormat\";\r\nimport MonthSelect from \"./MonthSelect\";\r\nimport { MonthButton } from \"./MonthSelect\";\r\nfunction Dashboard() {\r\n  const user = auth.currentUser;\r\n  const [total, setTotal] = React.useState({ income: 0, expense: 0 });\r\n  const [loading, setIsLoding] = React.useState(false);\r\n  const [month, setMonth] = React.useState(`0${new Date().getMonth() + 1}`);\r\n \r\n  React.useEffect(() => {\r\n    setIsLoding(true);\r\n    let col = db.collection(\"balances\");\r\n    if (user) col = col.where(\"user\", \"==\", user?.email);\r\n    col = col\r\n      .where(\"date\", \">=\", `2022-${month}-01`)\r\n      .where(\"date\", \"<=\", `2022-${month}-31`)\r\n      .get()\r\n      .then((snapshot) => {\r\n        let income = 0;\r\n        let expense = 0;\r\n        snapshot.docs.map((doc) => {\r\n          if (doc.data().income) income += doc.data().income * 1;\r\n          if (doc.data().expense) expense += doc.data().expense * 1;\r\n        });\r\n        setTotal({ income: income, expense: expense });\r\n        setIsLoding(false);\r\n      });\r\n  }, [month]);\r\n  return (\r\n    <Container>\r\n      <Grid columns={1}>\r\n        <Grid.Row stretched>\r\n          <Grid.Column textAlign=\"center\">\r\n            <Segment color=\"teal\">\r\n              <Statistic>\r\n                <Statistic.Label>本月收入</Statistic.Label>\r\n                {loading ? (\r\n                  <Placeholder>\r\n                    <Placeholder.Image rectangular />\r\n                  </Placeholder>\r\n                ) : (\r\n                  <Statistic.Value>{numFormat(total.income)}</Statistic.Value>\r\n                )}\r\n              </Statistic>\r\n            </Segment>\r\n          </Grid.Column>\r\n        </Grid.Row>\r\n        <Grid.Row stretched>\r\n          <Grid.Column textAlign=\"center\">\r\n            <Segment color=\"orange\">\r\n              <Statistic>\r\n                <Statistic.Label>本月支出</Statistic.Label>\r\n                {loading ? (\r\n                  <Placeholder>\r\n                    <Placeholder.Image rectangular />\r\n                  </Placeholder>\r\n                ) : (\r\n                  <Statistic.Value>{numFormat(total.expense)}</Statistic.Value>\r\n                )}\r\n              </Statistic>\r\n            </Segment>\r\n          </Grid.Column>\r\n        </Grid.Row>\r\n      </Grid>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default Dashboard;\r\n","export default __webpack_public_path__ + \"static/media/matthew.a5edfa2f.png\";","export default __webpack_public_path__ + \"static/media/kristy.8300278f.png\";","import { auth } from \"../utils/firebase\";\r\nimport { Button, Container, Card, Image, Icon, Grid,Modal,Header,Form } from \"semantic-ui-react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport sea from \"../images/avatar/large/matthew.png\";\r\nimport girl from \"../images/avatar/large/kristy.png\";\r\nimport React from \"react\";\r\nexport default function User() {\r\n  const history = useHistory();\r\n  const user = auth.currentUser;\r\n  // 編輯視窗顯示控制\r\n  const [open, setOpen] = React.useState(false);\r\n    // 資料欄位\r\n  const [name, setName] = React.useState(\"\");\r\n  function saveRow() {\r\n    const row = {\r\n      displayName: name,\r\n    };\r\n    user.updateProfile(row).then(()=>{\r\n      setOpen(false)\r\n    });\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      <Modal\r\n        closeIcon\r\n        open={open}\r\n        onClose={() => {\r\n          setOpen(false);\r\n        }}\r\n      >\r\n        <Header>編輯帳戶</Header>\r\n        <Modal.Content>\r\n          <Form size=\"large\">\r\n            <Form.Field>\r\n              <label>名稱</label>\r\n              <input\r\n                value={name}\r\n                onChange={(e) => {\r\n                  setName(e.target.value);\r\n                }}\r\n              />\r\n            </Form.Field>\r\n          </Form>\r\n        </Modal.Content>\r\n        <Modal.Actions>\r\n          <Button color=\"green\" onClick={saveRow}>\r\n            <Icon name=\"check\" />\r\n            Save\r\n          </Button>\r\n        </Modal.Actions>\r\n      </Modal>\r\n      <Grid centered>\r\n        <Grid.Row columns={3}>\r\n          <Grid.Column mobile={1} tablet={3} computer={5}>\r\n            {/* <Image size='tiny' src={user?.email=='mkdodos@gmail.com'?sea:girl} wrapped ui={false} /> */}\r\n          </Grid.Column>\r\n          <Grid.Column mobile={13} tablet={10} computer={6}>\r\n            <Card fluid>\r\n              <Image\r\n                src={user?.email == \"mkdodos@gmail.com\" ? sea : girl}\r\n                size=\"large\"\r\n              />\r\n              <Card.Content>\r\n                <Card.Header>{user?.displayName}</Card.Header>\r\n                <Card.Meta>\r\n                  <span className=\"date\">Joined in 2015</span>\r\n                </Card.Meta>\r\n                <Card.Description>{user && user.email}</Card.Description>\r\n              </Card.Content>\r\n              <Card.Content extra>\r\n                <Button\r\n                  onClick={() => {\r\n                    auth.signOut().then(() => {\r\n                      history.push(\"/login\");\r\n                    });\r\n                  }}\r\n                >\r\n                  SignOut\r\n                </Button>\r\n                <Button\r\n                  onClick={() => {\r\n                    setOpen(true)\r\n                  }}\r\n                >\r\n                  Edit\r\n                </Button>\r\n              </Card.Content>\r\n            </Card>\r\n          </Grid.Column>\r\n          <Grid.Column mobile={1} tablet={3} computer={5}>\r\n            {/* <Image src=\"/images/wireframe/image.png\" /> */}\r\n          </Grid.Column>\r\n        </Grid.Row>\r\n      </Grid>\r\n    </Container>\r\n  );\r\n}\r\n","import Header from \"./Header\";\r\nimport Accounts from \"./components/Accounts\";\r\nimport Cates from \"./components/Cates\";\r\nimport {\r\n  BrowserRouter,\r\n  Route,\r\n  Link,\r\n  Switch,\r\n  useHistory,\r\n  Redirect,\r\n} from \"react-router-dom\";\r\nimport Posts from \"./components/Posts\";\r\nimport Balances from \"./components/Balances\";\r\nimport QueryBalances from \"./components/QueryBalances\";\r\nimport Login from \"./components/Login\";\r\nimport Dashboard from \"./components/Dashboard\";\r\nimport User from \"./components/User\";\r\nimport { auth } from \"./utils/firebase\";\r\nimport React from \"react\";\r\n\r\nfunction App() {\r\n  const [user, setUser] = React.useState() || null;\r\n  React.useEffect(() => {\r\n    auth.onAuthStateChanged((currUser) => {\r\n      setUser(currUser);\r\n    });\r\n  }, []);\r\n \r\n  return (\r\n    <>\r\n      <BrowserRouter>\r\n        <Header></Header>\r\n        <Switch>\r\n          <Route path=\"/accounts\">\r\n            {/* 要有登入才能查看此頁,沒有登入時導向登入頁 */}\r\n            {user ? <Accounts /> : <Redirect to=\"login\" />}\r\n          </Route>\r\n          <Route path=\"/cates\">          \r\n            {user ? <Cates /> : <Redirect to=\"login\" />}\r\n          </Route>\r\n          <Route path=\"/balances\">            \r\n             {/* <Balances />  */}\r\n            {user ? <Balances /> : <Redirect to=\"login\" />}\r\n          </Route>\r\n          <Route path=\"/query-balances\">     \r\n          {user ? <QueryBalances /> : <Redirect to=\"login\" />}       \r\n             {/* <QueryBalances />  */}\r\n            \r\n          </Route>\r\n          <Route path=\"/dashboard\">    \r\n          {user ? <Dashboard /> : <Redirect to=\"login\" />}          \r\n                \r\n          </Route>\r\n          {/* <Route path=\"/accounts\" component={Accounts}></Route> */}\r\n          {/* <Route path=\"/balances\" component={Balances}></Route> */}\r\n          <Route path=\"/login\" component={Login}></Route>\r\n          <Route path=\"/user\" component={User}></Route>\r\n          <Route path=\"/posts\" component={Posts}></Route>\r\n        </Switch>\r\n      </BrowserRouter>\r\n      {/* <Container>\r\n        <Topics />\r\n        <Posts />\r\n      </Container> */}\r\n    </>\r\n  );\r\n}\r\nexport default App;\r\n","import ReactDom from 'react-dom'\r\nimport App from './App';\r\nimport 'semantic-ui-css/semantic.min.css'\r\n\r\nconst container = document.getElementById('root');\r\nReactDom.render(<App/>,container)"],"sourceRoot":""}